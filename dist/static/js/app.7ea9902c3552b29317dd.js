webpackJsonp([1],{BX0M:function(t,e){},JgzS:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},o,!1,function(t){n("BX0M")},null,null).exports,i=n("Dd8w"),u=n.n(i),s=n("/ocq"),c=n("Xxa5"),l=n.n(c),d=n("mvHQ"),p=n.n(d),f=n("exGp"),h=n.n(f),m=function(t){localStorage.setItem("token",t)},v=function(){var t=localStorage.getItem("token");return t||!1},g=function(){var t=localStorage.getItem("userinfo");return!!t&&JSON.parse(t)},y=n("//Fk"),_=n.n(y),w=n("mtWM"),k=n.n(w).a.create({baseURL:"http://localhost:5757/wx",timeout:3e4});k.interceptors.request.use(function(t){var e=v();return e&&(t.headers.common.Authorization="Bearer "+e),t},function(t){return _.a.reject(t)}),k.interceptors.response.use(function(t){var e=t.headers["new-token"];return e&&m(e),t.data},function(t){var e=t.response;return 401===e.status||e.status,_.a.reject(e)});var b=function(t,e){return k({method:"get",url:t,params:e})},I={oauth2:function(t){return b("/oauth2",t)},login:function(t){return b("/login",t)},starlist:function(t){return b("/starList",t)},jssdk:function(t){return b("/jssdk",t)},wxpay:function(t){return b("/unified",t)}},x={data:function(){return{obj:"",currentId:2,payItems:[{id:0,money:2,hotValue:30},{id:1,money:5,hotValue:100},{id:2,money:10,hotValue:300},{id:3,money:20,hotValue:700},{id:4,money:50,hotValue:2e3},{id:5,money:100,hotValue:5e3}]}},methods:{checkOne:function(t){this.currentId=t},Pay:function(){var t=this;return h()(l.a.mark(function e(){var n,a,o,r,i,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.payItems.find(function(e){return e.id===t.currentId}).money),e.prev=1,n=g(),a=n.openid,o=n.unionid,console.log("用户openid："+a+",unionid:"+o+"发起支付"),r=1,i=p()({msg:"测试",openid:a,unionid:o}),e.next=8,I.chooseWXPayAsync(r,i);case 8:u=e.sent,console.log("支付成功"+p()(u)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}},e,t,[[1,12]])}))()}},mounted:function(){var t=this;return h()(l.a.mark(function e(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"support-container"},[n("div",{staticClass:"user"},[n("p",[t._v(t._s(t.obj))])]),t._v(" "),n("h3",[t._v("为TA冲榜")]),t._v(" "),n("div",{staticClass:"star"}),t._v(" "),n("div",{staticClass:"pay-container"},t._l(t.payItems,function(e,a){return n("div",{key:a,staticClass:"pay-item"},[n("div",[t._v(t._s(e.money)+"元(+"+t._s(e.hotValue)+"热度)")]),t._v(" "),n("input",{attrs:{type:"checkbox",name:"checkboxinput"},domProps:{checked:e.id==t.currentId},on:{click:function(n){t.checkOne(e.id)}}})])})),t._v(" "),n("button",{staticClass:"btn subpay",on:{click:t.Pay}},[t._v("用爱发电1")])])},staticRenderFns:[]};var V=n("VU/8")(x,S,!1,function(t){n("JgzS")},"data-v-8d560eee",null).exports,j={render:function(){var t=this.$createElement;return(this._self._c||t)("h1",[this._v("404 NotFound")])},staticRenderFns:[]},P=n("VU/8")({},j,!1,null,null,null).exports,A=["chooseWXPay"],C=function(t){I.jssdk({url:t}).then(function(t){-1===(t=t.data).code&&console.log(t.data.msg);var e={debug:!1,appId:t.data.app_id,timestamp:t.data.timestamp,nonceStr:t.data.nonce_str,signature:t.data.signature,jsApiList:A};a.a.wechat.config(e)})};a.a.use(s.a);var E=new s.a({base:"/page",routes:[{path:"/Support",name:"Support",component:V,meta:{title:"充值打榜"}},{path:"*",component:P,meta:{title:"找不到页面"}}]});E.beforeEach(function(t,e,n){document.title=t.meta.title;var a,o=v();if(o||"oauth2"===t.name){if(!o&&"oauth2"===t.name){var r=u()({},t.query);I.login(r).then(function(t){var e=t.data.data,n=e.token,a=e.userinfo;m(n),function(t){localStorage.setItem("userinfo",p()(t))}(a),window.location.href=window.location.origin+localStorage.getItem("tourl")})}}else{a=t.fullPath,localStorage.setItem("tourl",a);var i=u()({},t.quert),s=i.code,c=i.userId,l={state:t.fullPath+"-"+s+"-"+c};I.oauth2(l).then(function(t){window.location.href=t.data.data})}}),E.afterEach(function(t){var e=window.location.origin+t.fullPath;C(e)});var F=E,W=n("n6Wb");a.a.use(W.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:F,components:{App:r},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.7ea9902c3552b29317dd.js.map